{% extends "shop/dashboard/base.html" %}
{% load static sekizai_tags %}

{% block content %}
	{% addtoblock "css" %}<link rel="stylesheet" href="{% static 'node_modules/ng-admin/build/ng-admin.min.css' %}">{% endaddtoblock %}
	{% addtoblock "js" %}<script src="{% static 'node_modules/ng-admin/build/ng-admin.min.js' %}"></script>{% endaddtoblock %}
	{% addtoblock "ng-requires" %}ng-admin{% endaddtoblock %}
	<div ui-view="ng-admin"></div>
{% endblock content %}

{% block last %}
	<script type="text/javascript">
(function(angular, undefined) {
'use strict';

var djangoShopDashboard = angular.module('djangoShopDashboard');

djangoShopDashboard.config(['NgAdminConfigurationProvider', function(nga) {
	var admin = nga.application("Dashboard");

	admin.baseApiUrl('http://jsonplaceholder.typicode.com/');

	var user = nga.entity('users');
	// set the fields of the user entity list view
	user.listView().fields([
		nga.field('name').isDetailLink(true),
		nga.field('username'),
		nga.field('email')
	]);
	user.creationView().fields([
		nga.field('name'),
		nga.field('username'),
		nga.field('email', 'email'),
		nga.field('address.street').label('Street'),
		nga.field('address.city').label('City'),
		nga.field('address.zipcode').label('Zipcode'),
		nga.field('phone'),
		nga.field('website')
	]);
	// use the same fields for the editionView as for the creationView
	user.editionView().fields(user.creationView().fields());

	// add the user entity to the admin application
	admin.addEntity(user);

	var post = nga.entity('posts');
	post.listView().fields([
		nga.field('id'),
		nga.field('title').isDetailLink(true),
		nga.field('userId', 'reference')
			.targetEntity(user)
			.targetField(nga.field('username'))
			.label('User')
	]);
	post.showView().fields([
		nga.field('title'),
		nga.field('body', 'text'),
		nga.field('userId', 'reference')
			.targetEntity(user)
			.targetField(nga.field('username'))
			.label('User'),
		nga.field('comments', 'referenced_list')
		.targetEntity(nga.entity('comments'))
		.targetReferenceField('postId')
		.targetFields([
			nga.field('email'),
			nga.field('name')
		])
		.sortField('id')
		.sortDir('DESC'),
	]);

	admin.addEntity(post);

	// attach the admin application to the DOM and execute it
	nga.configure(admin);
}]);

})(window.angular);
	</script>
{% endblock %}
